<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TAX CALCULATOR</title>
    <!-- <link rel="stylesheet" href="style.css" /> -->
    <!-- CSS only -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"
    />
    <style>
      .container {
  background-color: #333333;
}

.fonts {
  color: #ffffff;
}

.first-one {
  background-color: #4d4d4d;
  margin: 10px;
  border-radius: 10px;
}

.font-title {
  color: #ffffff;
  font-size: 18px;
  font-weight: bold;
}

.hrSize {
  height: 3px;
  background-color: black;
}

/* .circle {
  background-color: red;
  height: 10px;
  width: 10px;
} */

.hrSize2 {
  width: 95% !important;
  height: 3px;
  background-color: black;
  margin: auto;
}

input {
  text-align: right;
}

.second-one {
  background-color: #4d4d4d;

  border-radius: 10px;
}

.third-one {
  background-color: #4d4d4d;
  margin-left: 10px;
  border-radius: 10px;
}

/* Chrome, Safari, Edge, Opera */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Firefox */
input[type="number"] {
  -moz-appearance: textfield;
}
.fixed-height {
  height: 30px;
}

#in_tax_warning{
  color: rgb(255, 174, 174);
}

    </style>
  </head>
  <body style="background-color: #333333">
    <div class="container">
      <div class="row">
        <div class="pt-5 pb-4">
          <h1 class="fonts text-center">Tax Calculator</h1>
          <p class="fs-3 text text-light text-center">Tax calculation doesn't have to be tough.Level up your game to calculate your own taxes and find out how much to invest to recieve the maximum tax rebates!</p>
        </div>

        <div class="col-md-6">
          <div class="row">
            <div class="first-one">
              <div >
                <p class="mt-4 font-title">
                  Select Tax Payer Category <span class="text-danger">*</span>
                </p>
                <hr class="hrSize" />
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="catagory"
                  id="inlineRadio1"
                  value="1"
                  
                />
                <!-- onchange="totalSum()" -->
                <label class="form-check-label" for="inlineRadio1"
                  ><p class="fonts">General</p></label
                >
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="catagory"
                  id="inlineRadio2"
                  value="2"
                  
                />
                <!-- onchange="totalSum()" -->
                <label class="form-check-label" for="inlineRadio2"
                  ><p class="fonts">Disabled</p></label
                >
              </div>
              <div class="form-check form-check-inline">
                <input
                  class="form-check-input"
                  type="radio"
                  name="catagory"
                  id="inlineRadio2"
                  value="3"
                  
                />
                <!-- onchange="totalSum()" -->
                <label class="form-check-label" for="inlineRadio2"
                  ><p class="fonts">Gazetted Freedom Fighters</p></label
                >
              </div>
            </div>

            <div class="first-one mt-4">
              <!-- second portion -->
              <div>
                <div class="row pt-4">
                  <div class="col-6 pt-2">
                    <p class="font-title mt-1">Income Details</p>
                  </div>
                  <div class="col-6 pt-2">
                    <p class="text-end font-title mt-1">Amount</p>
                  </div>
                  <hr class="hrSize2" />

                  <!-- second portion Basic pay plus field -->
                  <div>
                    <div class="row mt-3">
                      <div class="col-md-8 fonts"><p>Basic Pay</p></div>
                      <div class="col-md-4">
                        <input
                          class="form-control mb-2"
                          type="text"
                          value="0"
                          aria-label="default input example"
                          id="basic_pay"
                        />
                      </div>
                      <hr class="hrSize2 mt-2" />
                    </div>

                    <div class="row mt-2">
                      <div class="col-md-8 fonts"><p>House Rent Allowance</p></div>
                      <div class="col-md-4">
                        <input
                          class="form-control mb-2"
                          type="text"
                          value="0"
                          aria-label="default input example"
                          id="house_rent"
                        />
                      </div>
                      <hr class="hrSize2" />
                    </div>

                    <div class="row mt-2">
                      <div class="col-md-8 fonts"><p>Conveyance Allowance</p></div>
                      <div class="col-md-4">
                        <input
                          class="form-control mb-2"
                          type="text"
                          value="0"
                          aria-label="default input example"
                          id="conveyance_allowanc"
                        />
                      </div>
                      <hr class="hrSize2" />
                    </div>

                    <div class="row mt-2">
                      <div class="col-md-8 fonts"><p>Medical Allowance</p></div>
                      <div class="col-md-4 mb-2">
                        <input
                          class="form-control"
                          type="text"
                          value="0"
                          aria-label="default input example"
                          id="medical_allowanc"
                        />
                      </div>
                      <hr class="hrSize2 mt-3" />
                    </div>

                    <div class="row mt-2">
                      <div class="col-md-8 fonts">
                        <p>Other, If any (Festival Bonus,Performance Bonus,Provident
                          Fund,Overtime,Special Pay,Interest Income etc.)</p>
                        

                        </p>
                      </div>
                      <div class="col-md-4">
                        <input
                          class="form-control mb-2"
                          type="text"
                          value="0"
                          aria-label="default input example"
                          id="bonus"
                        />
                      </div>
                      <hr class="hrSize2 mt-2" />
                    </div>

                    <div class="row mt-2">
                      <div class="col fonts"><p>Total</p></div>
                      <div class="col mb-2">
                        <p style="text-align: right" class="fonts" id="total">0</p>
                      </div>
                      <hr class="hrSize2" />
                    </div>

                    <div class="row mt-2">
                      <div class="col fonts">
                        <p>Total Taxable Income</p>
                        <p id="total_taxable_income">00,000.00</p>
                      </div>
                      <div class="col mb-3">
                        <p class="fonts">Allowable Investment</p>
                        <p class="fonts" id="allowable_investment">00,000.00</p>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-6 ps-md-5">
          <div class="row">
            <div class="col-6 mt-2">
              <div class="second-one fonts px-md-3 py-2">
                <p class="font-title mt-3">
                  Date Of Birth <span class="text-danger">*</span>
                </p>
                <hr class="hrSize my-2" />
                <input type="date" class="form-control mb-1" id="dob"  />
                <!-- onchange="totalSum()" -->
              </div>
            </div>
            <div class="col-6 mt-2">
              <div class="second-one fonts px-3 py-2">
                <p class="font-title mt-3">
                  Gender <span class="text-danger">*</span>
                </p>
                <hr class="hrSize my-2" />
                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="gender"
                    id="inlineRadio1"
                    value="1"
                    />
                    <!-- onchange="totalSum()" -->
                  <label class="form-check-label" for="inlineRadio1"
                    ><p class="fonts">Male</p></label
                  >
                </div>

                <div class="form-check form-check-inline">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="gender"
                    id="inlineRadio1"
                    value="2"
                    
                  />
                  <!-- onchange="totalSum()" -->
                  <label class="form-check-label" for="inlineRadio1"
                    ><p class="fonts">Female</p></label
                  >
                </div>
              </div>
            </div>
          </div>

          <div class="col-12 pt-4">
            <div class="second-one px-3 py-2 mt-2">
              <div class="row">
                <div class="col-6">
                  <div class="fixed-height">
                    <p class="font-title">Investment Details</p>
                  </div>

                  <p class="text-white">Fill the cells application for you</p>
                </div>
                <div class="col-6">
                  <div class="fixed-height"></div>
                  <p class="text-end font-title">Amount</p>
                </div>
                <hr class="hrSize2" />
              </div>

              <div class="row mt-2">
                <div class="col-md-8 fonts">
                  <p>Shanchai Patra/Treasury Bills/Treasury Bonds</p>
                </div>
                <div class="col-md-4">
                  <input
                    class="form-control mb-2"
                    type="text"
                    value="0"
                    aria-label="default input example"
                    id="t_bills"
                  />
                </div>
                <hr class="hrSize2 " />
              </div>

              <div class="row mt-2">
                <div class="col-md-8 fonts">
                  <p>Life Insurance Premium</p>
                </div>
                <div class="col-md-4">
                  <input
                    class="form-control mb-2"
                    type="text"
                    value="0"
                    aria-label="default input example"
                    id="l_insurance"
                  />
                </div>
                <hr class="hrSize2" />
              </div>

              <div class="row mt-2">
                <div class="col-md-8 fonts">
                  <p>Stocks/Bonds/Mutual Funds</p>
                </div>
                <div class="col-md-4">
                  <input
                    class="form-control mb-2"
                    type="text"
                    value="0"
                    aria-label="default input example"
                    id="stocks"
                  />
                </div>
                <hr class="hrSize2" />
              </div>

              <div class="row mt-2">
                <div class="col-md-8 fonts">
                  <p>Contribution to Provident Fund(Employee+Employer)</p>
                </div>
                <div class="col-md-4">
                  <input
                    class="form-control mb-2"
                    type="text"
                    value="0"
                    aria-label="default input example"
                    id="fund"
                  />
                </div>
                <hr class="hrSize2" />
              </div>

              <div class="row mt-2">
                <div class="col-md-8 fonts">
                  <p>Others,If any(Give details)</p>
                </div>
                <div class="col-md-4">
                  <input
                    class="form-control mb-2"
                    type="text"
                    value="0"
                    aria-label="default input example"
                    id="details"
                  />
                </div>
                <hr class="hrSize2 mt-5" />
              </div>

              <div class="row mt-2">
                <div class="col fonts"><p>Total</p></div>
                <div class="col mb-2">
                  <p style="text-align: right" class="fonts" id="total2">0</p>
                </div>
                <hr class="hrSize2" />
              </div>

              <div class="col fonts mb-4">
                <p class="mt-2 ">Investment Required To Enjoy Maximum Tax Rebate:</p>
                <p><span id="in_tax">00,000.00</span><span id="in_tax_warning"></span></p>
              </div>
            </div>
          </div>

          <!-- second portion second part -->
        </div>
      </div>
    </div>

    <!-- JavaScript Bundle with Popper -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2"
      crossorigin="anonymous"
    ></script>

    <script>
      function removeComa(str){
        return str.replace(/,/g,'');
      }

    </script>
    <script>
      var basic_pay = document.getElementById("basic_pay");
      var house_rent = document.getElementById("house_rent");
      var conveyance_allowanc = document.getElementById("conveyance_allowanc");
      var medical_allowanc = document.getElementById("medical_allowanc");
      var bonusobj = document.getElementById("bonus");
      var totalObj = document.getElementById("total");
      var totalTIObj = document.getElementById("total_taxable_income");
      var totalAIObj = document.getElementById("allowable_investment");

      var t_billsObj = document.getElementById("t_bills");
      var l_insuranceObj = document.getElementById("l_insurance");
      var stocksObj = document.getElementById("stocks");
      var fundObj = document.getElementById("fund");
      var detailsObj = document.getElementById("details");
      var total2Obj = document.getElementById("total2");
      var in_taxObj = document.getElementById("in_tax");
      var dob = document.getElementById("dob");
      var in_tax_warning = document.getElementById("in_tax_warning");


      function totalSum(){
        let genders = document.getElementsByName("gender");
        let selectedGender;

        for(let i = 0; i < genders.length; i++) {
          if(genders[i].checked){
            selectedGender = genders[i].value;
          } 
        }
        // console.log(selectedGender);

        let dob_value = dob.value;
        // console.log(dob_value);


        let catagories = document.getElementsByName("catagory");
        let selectedCatagory;

        for(let i = 0; i < catagories.length; i++) {
          if(catagories[i].checked){
            selectedCatagory = catagories[i].value;
          } 
        }

        let age = new Date("2022-06-30");
        let dob_value2 = new Date(dob_value);
        let z = age- dob_value2;
        let org_age = z / 31536000000;
  
        

        let basicPay = parseInt(removeComa(basic_pay.value));
        let houseRent =  parseInt(removeComa(house_rent.value));
        let conveyanceAllowanc = parseInt(removeComa(conveyance_allowanc.value));
        let medicalAllowanc =  parseInt(removeComa(medical_allowanc.value));
        let bonus = parseInt(removeComa(bonusobj.value));
        let total = basicPay + houseRent + conveyanceAllowanc + medicalAllowanc + bonus;

        
        basic_pay.value = removeComa(basic_pay.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        house_rent.value = removeComa(house_rent.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        conveyance_allowanc.value = removeComa(conveyance_allowanc.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        medical_allowanc.value = removeComa(medical_allowanc.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        bonusobj.value = removeComa(bonusobj.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

        totalObj.innerHTML = total.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

        let basic50 = basicPay / 2;
        let basic10 = basicPay / 10;

        let minPayRent = 0;
        if(basic50 > houseRent){
          minPayRent = houseRent;
        }
        else{
          minPayRent = basic50;
        }

        if(minPayRent > 300000){
          minPayRent = 300000;
        }
      
        let hrOrgValue = houseRent - minPayRent;


        let conOrgValue = 0;
        if(conveyanceAllowanc > 30000){
          conOrgValue =30000;
        }
        else{
          conOrgValue = conveyanceAllowanc;
        }
        conOrgValue = conveyanceAllowanc - conOrgValue;

        
        let minMA = 0;
        if(basic10 < medicalAllowanc){
          minMA = basic10;
        }
        else{
          minMA = medicalAllowanc;
        }

        if(minMA > 120000){
          minMA = 120000;
        }
        let mediOrgValue = medicalAllowanc - minMA;

        let orgtotal = basicPay + hrOrgValue + conOrgValue + mediOrgValue + bonus;
        totalTIObj.innerHTML = orgtotal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

        let total_ai =  orgtotal / 4;
        if(org_age <= 65 && orgtotal<= 300000 && selectedGender ==1 && selectedCatagory == 1){
          total_ai = 0;
        }
        else if(orgtotal<= 350000 && selectedGender ==2 && selectedCatagory == 1){
          total_ai = 0;
        }
        else if(org_age >= 65  &&  orgtotal<= 350000 && selectedGender ==1 && selectedCatagory == 1){
          total_ai = 0;
        }
        else if(org_age >= 65  &&  orgtotal<= 450000 && selectedCatagory == 2){
          total_ai = 0;
        }
        else if(orgtotal<= 450000 && selectedCatagory == 2){
          total_ai = 0;
        }
        else if(orgtotal<= 475000 && selectedCatagory == 3){
          total_ai = 0;
        }
        totalAIObj.innerHTML = total_ai.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");

        let t_bills = parseInt(removeComa(t_billsObj.value));
        t_billsObj.value = removeComa(t_billsObj.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        console.log(t_bills);
        if(t_bills > 0){
          let l_insurance= parseInt(removeComa(l_insuranceObj.value));
          let stocks = parseInt(removeComa(stocksObj.value));
          let fund = parseInt(removeComa(fundObj.value));
          let details = parseInt(removeComa(detailsObj.value));
          let total2 = t_bills + l_insurance + stocks + fund + details;
          let in_tax = total_ai - total2;

          l_insuranceObj.value = removeComa(l_insuranceObj.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          stocksObj.value = removeComa(stocksObj.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          fundObj.value = removeComa(fundObj.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          detailsObj.value = removeComa(detailsObj.value).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");


          total2Obj.innerHTML = total2.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          in_taxObj.innerHTML = in_tax.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");


          if(in_tax<=0){
            in_taxObj.innerHTML = "";
            in_tax_warning.innerHTML = " You don’t need to invest for tax rebate right now but you are welcome to start your investment journey with us.";
          }
          else{
            in_tax_warning.innerHTML = "";
          }

          
        }
        else if(isNaN(t_bills)){
          total2Obj.innerHTML = 0;
          in_taxObj.innerHTML = 0;
        }

      }

 
      

      basic_pay.addEventListener("keyup", function(){
        totalSum();
      });
      house_rent.addEventListener("keyup", function(){
        totalSum();
      });
      conveyance_allowanc.addEventListener("keyup", function(){
        totalSum();
      });
      bonusobj.addEventListener("keyup", function(){
        totalSum();
      });
      medical_allowanc.addEventListener("keyup", function(){
        totalSum();
      });


      t_billsObj.addEventListener("keyup", function(){
        totalSum();
      });
      l_insuranceObj.addEventListener("keyup", function(){
        totalSum();
      });
      stocksObj.addEventListener("keyup", function(){
        totalSum();
      });
      fundObj.addEventListener("keyup", function(){
        totalSum();
      });
      detailsObj.addEventListener("keyup", function(){
        totalSum();
      });


    </script>
  </body>
</html>
